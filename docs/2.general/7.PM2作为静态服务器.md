## 通过 http 提供静态文件

PM2 可以通过pm2 serve`命令非常轻松地提供静态文件服务。它支持从指定文件夹提供原始文件，或者您可以使用它提供 SPA（单页应用程序）的服务。

## 命令行界面

使用简单的命令通过 http 服务您的静态文件（如前端应用程序）：

```
pm2 serve <path> <port>
```

如果没有指定`<path>`，将使用当前文件夹作为服务的根目录。对于端口，默认文件夹是`8080`. 您可以使用与普通应用程序相同的选项，例如`--name`或`--watch`。

## 进程文件

您可以在进程文件中进行配置，声明一个特殊的目录，来提供文件服务：

```
module.exports = {
  script: "serve",
  env: {
    PM2_SERVE_PATH: '.',
    PM2_SERVE_PORT: 8080
  }
}
```

您只需要在环境变量中添加`PM2_SERVE_PATH`和`PM2_SERVE_PORT`指定路径和端口即可，默认与 CLI 相同。



## SPA服务：将所有重定向到 index.html

要将所有请求自动重定向到 index.html，请使用以下`--spa`选项：

```
pm2 serve --spa
```

通过进程文件配置：

```
module.exports = {
  script: "serve",
  env: {
    PM2_SERVE_PATH: '.',
    PM2_SERVE_PORT: 8080,
    PM2_SERVE_SPA: 'true',
    PM2_SERVE_HOMEPAGE: './index.html'
  }
}
```

### 使用密码保护访问

为了基本保护对公开文件的访问，您可以使用`--basic-auth-username`and `--basic-auth-password`：

```
pm2 serve --basic-auth-username <username> --basic-auth-password <password>
```

通过进程文件配置：

```
module.exports = {
  script: "serve",
  env: {
    PM2_SERVE_PATH: '.',
    PM2_SERVE_PORT: 8080,
    PM2_SERVE_BASIC_AUTH: 'true',
    PM2_SERVE_BASIC_AUTH_USERNAME: 'example-login',
    PM2_SERVE_BASIC_AUTH_PASSWORD: 'example-password'
  }
}
```
